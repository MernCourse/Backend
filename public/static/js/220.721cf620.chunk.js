"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[220],{356:(e,a,t)=>{t.d(a,{A:()=>n});var s=t(43),i=t(347),l=t(579);const n=e=>{const a=(0,s.useRef)(),[t,n]=(0,s.useState)(),[r,d]=(0,s.useState)(),[u,o]=(0,s.useState)(!1);(0,s.useEffect)((()=>{if(!t)return;const e=new FileReader;e.onload=()=>{d(e.result)},e.readAsDataURL(t)}),[t]);return(0,l.jsxs)("div",{className:"form-control",children:[(0,l.jsx)("input",{id:e.id,ref:a,style:{display:"none"},type:"file",accept:".jpg,.png,.jpeg",onChange:a=>{const t=a.target.files;let s=u;t||1===t.length?(n(t[0]),s=!0):s=!1,o(s),e.onInput(e.id,t[0],s)}}),(0,l.jsxs)("div",{className:"image-upload ".concat(e.center&&"center"),children:[(0,l.jsxs)("div",{className:"image-upload__preview",children:[r&&(0,l.jsx)("img",{src:r,alt:"preview"}),!r&&(0,l.jsx)("p",{children:"Please pick an image!!"})]}),(0,l.jsx)(i.A,{type:"button",onClick:()=>{a.current.click()},children:"PICK IMAGE"})]}),!u&&(0,l.jsx)("p",{children:e.errorText})]})}},244:(e,a,t)=>{t.d(a,{A:()=>r});var s=t(43),i=t(962),l=t(579);const n=(e,a)=>{switch(a.type){case"CHANGE":return{...e,value:a.val,isValid:(0,i.tf)(a.val,a.validators)};case"TOUCH":return{...e,isTouched:!0};default:return e}},r=e=>{const[a,t]=(0,s.useReducer)(n,{value:e.initialValue||"",isTouched:!1,isValid:e.initialValid||!1}),{id:i,onInput:r}=e,{value:d,isValid:u}=a;(0,s.useEffect)((()=>{r(i,d,u)}),[i,d,u,r]);const o=a=>{t({type:"CHANGE",val:a.target.value,validators:e.validators})},p=()=>{t({type:"TOUCH"})},c="input"===e.element?(0,l.jsx)("input",{id:e.id,type:e.type,placeholder:e.placeholder,onChange:o,onBlur:p,value:a.value}):(0,l.jsx)("textarea",{id:e.id,rows:e.rows||3,onChange:o,onBlur:p,value:a.value});return(0,l.jsxs)("div",{className:"form-control ".concat(!a.isValid&&a.isTouched&&"form-control--invalid"),children:[(0,l.jsx)("label",{htmlFor:e.id,children:e.label}),c,!a.isValid&&a.isTouched&&(0,l.jsx)("p",{children:e.errorText})]})}},789:(e,a,t)=>{t.d(a,{m:()=>l});var s=t(43);const i=(e,a)=>{switch(a.type){case"INPUT_CHANGE":let t=!0;for(const s in e.inputs)e.inputs[s]&&(t=s===a.inputId?t&&a.isValid:t&&e.inputs[s].isValid);return{...e,inputs:{...e.inputs,[a.inputId]:{value:a.value,isValid:a.isValid}},isValid:t};case"SET_DATA":return{inputs:a.inputs,isValid:a.formIsValid};default:return e}},l=(e,a)=>{const[t,l]=(0,s.useReducer)(i,{inputs:e,isValid:a});return[t,(0,s.useCallback)(((e,a,t)=>{l({type:"INPUT_CHANGE",value:a,isValid:t,inputId:e})}),[]),(0,s.useCallback)(((e,a)=>{l({type:"SET_DATA",inputs:e,formIsValid:a})}),[])]}},962:(e,a,t)=>{t.d(a,{B_:()=>r,Ik:()=>d,i$:()=>u,tf:()=>o});const s="REQUIRE",i="MINLENGTH",l="MAXLENGTH",n="EMAIL",r=()=>({type:s}),d=e=>({type:i,val:e}),u=()=>({type:n}),o=(e,a)=>{let t=!0;for(const r of a)r.type===s&&(t=t&&e.trim().length>0),r.type===i&&(t=t&&e.trim().length>=r.val),r.type===l&&(t=t&&e.trim().length<=r.val),"MIN"===r.type&&(t=t&&+e>=r.val),"MAX"===r.type&&(t=t&&+e<=r.val),r.type===n&&(t=t&&/^\S+@\S+\.\S+$/.test(e));return t}},220:(e,a,t)=>{t.r(a),t.d(a,{default:()=>x});var s=t(43),i=t(837),l=t(626),n=t(863),r=t(244),d=t(347),u=t(356),o=t(962),p=t(789),c=t(886),v=t(864),m=t(171),h=t(579);const x=()=>{const e=(0,s.useContext)(c.c),[a,t]=(0,s.useState)(!0),{isLoading:x,error:j,sendRequest:y,clearError:f}=(0,m.x)(),[g,I,A]=(0,p.m)({email:{value:"",isValid:!1},password:{value:"",isValid:!1}},!1);return(0,h.jsxs)(s.Fragment,{children:[(0,h.jsx)(l.A,{error:j,onClear:f}),(0,h.jsxs)(i.A,{className:"authentication",children:[x&&(0,h.jsx)(n.A,{asOverlay:!0}),(0,h.jsx)("h2",{children:"Login Required"}),(0,h.jsx)("hr",{}),(0,h.jsxs)("form",{onSubmit:async t=>{t.preventDefault();let s=v._Y,i=null,l={};a?(s+=v.S3,i=JSON.stringify({email:g.inputs.email.value,password:g.inputs.password.value}),l={"Content-type":"application/json"}):(s+=v.Hx,i=new FormData,i.append("email",g.inputs.email.value),i.append("name",g.inputs.name.value),i.append("password",g.inputs.password.value),i.append("image",g.inputs.image.value));try{const a=await y(s,"POST",i,l);e.login(a.userData._id,a.userData.token)}catch(j){}},children:[!a&&(0,h.jsxs)(s.Fragment,{children:[(0,h.jsx)(r.A,{element:"input",id:"name",type:"text",label:"Your Name",validators:[(0,o.B_)()],errorText:"Please enter a name.",onInput:I}),(0,h.jsx)(u.A,{id:"image",onInput:I,center:!0,errorText:"Please, provide an image!!"})]}),(0,h.jsx)(r.A,{element:"input",id:"email",type:"email",label:"E-Mail",validators:[(0,o.i$)()],errorText:"Please enter a valid email address.",onInput:I}),(0,h.jsx)(r.A,{element:"input",id:"password",type:"password",label:"Password",validators:[(0,o.Ik)(6)],errorText:"Please enter a valid password, at least 6 characters.",onInput:I}),(0,h.jsx)(d.A,{type:"submit",disabled:!g.isValid,children:a?"LOGIN":"SIGNUP"})]}),(0,h.jsxs)(d.A,{inverse:!0,onClick:()=>{a?A({...g.inputs,name:{value:"",isValid:!1},image:{value:null,isValid:!1}},!1):A({...g.inputs,name:void 0,image:void 0},g.inputs.email.isValid&&g.inputs.password.isValid),t((e=>!e))},children:["SWITCH TO ",a?"SIGNUP":"LOGIN"]})]})]})}}}]);
//# sourceMappingURL=220.721cf620.chunk.js.map
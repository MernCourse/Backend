"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[830],{830:(e,t,i)=>{i.r(t),i.d(t,{default:()=>f});var a=i(43),l=i(688),s=i(244),n=i(347),r=i(837),d=i(863),c=i(626),u=i(962),o=(i(284),i(789)),p=i(171),v=i(886),h=i(864),V=i(579);const f=()=>{const e=(0,a.useContext)(v.c),{isLoading:t,error:i,sendRequest:f,clearError:y}=(0,p.x)(),[x,m]=(0,a.useState)(),A=(0,l.g)().placeId,T=(0,l.W6)(),[I,j,C]=(0,o.m)({title:{value:"",isValid:!1},description:{value:"",isValid:!1}},!1);(0,a.useEffect)((()=>{(async()=>{try{const e=await f(h._Y+h.sR+A);m(e),C({title:{value:e.title,isValid:!0},description:{value:e.description,isValid:!0}},!0)}catch(i){}})()}),[f,A,C]);return x||i?(0,V.jsxs)(a.Fragment,{children:[(0,V.jsx)(c.A,{error:i,onclear:y}),t&&(0,V.jsx)("div",{className:"center",children:(0,V.jsx)(d.A,{})}),!t&&x&&(0,V.jsxs)("form",{className:"place-form",onSubmit:async t=>{t.preventDefault();try{await f(h._Y+h.sR+A,"PATCH",JSON.stringify({title:I.inputs.title.value,description:I.inputs.description.value}),{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.token)}),T.push("/".concat(e.userId,"/places"))}catch(i){console.log(i)}},children:[(0,V.jsx)(s.A,{id:"title",element:"input",type:"text",label:"Title",validators:[(0,u.B_)()],errorText:"Please enter a valid title.",onInput:j,initialValue:x.title,initialValid:!0}),(0,V.jsx)(s.A,{id:"description",element:"textarea",label:"Description",validators:[(0,u.Ik)(5)],errorText:"Please enter a valid description (min. 5 characters).",onInput:j,initialValue:x.description,initialValid:!0}),(0,V.jsx)(n.A,{type:"submit",disabled:!I.isValid,children:"UPDATE PLACE"})]})]}):(0,V.jsx)("div",{className:"center",children:(0,V.jsx)(r.A,{children:(0,V.jsx)("h2",{children:"Could not find place!"})})})}},244:(e,t,i)=>{i.d(t,{A:()=>r});var a=i(43),l=i(962),s=i(579);const n=(e,t)=>{switch(t.type){case"CHANGE":return{...e,value:t.val,isValid:(0,l.tf)(t.val,t.validators)};case"TOUCH":return{...e,isTouched:!0};default:return e}},r=e=>{const[t,i]=(0,a.useReducer)(n,{value:e.initialValue||"",isTouched:!1,isValid:e.initialValid||!1}),{id:l,onInput:r}=e,{value:d,isValid:c}=t;(0,a.useEffect)((()=>{r(l,d,c)}),[l,d,c,r]);const u=t=>{i({type:"CHANGE",val:t.target.value,validators:e.validators})},o=()=>{i({type:"TOUCH"})},p="input"===e.element?(0,s.jsx)("input",{id:e.id,type:e.type,placeholder:e.placeholder,onChange:u,onBlur:o,value:t.value}):(0,s.jsx)("textarea",{id:e.id,rows:e.rows||3,onChange:u,onBlur:o,value:t.value});return(0,s.jsxs)("div",{className:"form-control ".concat(!t.isValid&&t.isTouched&&"form-control--invalid"),children:[(0,s.jsx)("label",{htmlFor:e.id,children:e.label}),p,!t.isValid&&t.isTouched&&(0,s.jsx)("p",{children:e.errorText})]})}},789:(e,t,i)=>{i.d(t,{m:()=>s});var a=i(43);const l=(e,t)=>{switch(t.type){case"INPUT_CHANGE":let i=!0;for(const a in e.inputs)e.inputs[a]&&(i=a===t.inputId?i&&t.isValid:i&&e.inputs[a].isValid);return{...e,inputs:{...e.inputs,[t.inputId]:{value:t.value,isValid:t.isValid}},isValid:i};case"SET_DATA":return{inputs:t.inputs,isValid:t.formIsValid};default:return e}},s=(e,t)=>{const[i,s]=(0,a.useReducer)(l,{inputs:e,isValid:t});return[i,(0,a.useCallback)(((e,t,i)=>{s({type:"INPUT_CHANGE",value:t,isValid:i,inputId:e})}),[]),(0,a.useCallback)(((e,t)=>{s({type:"SET_DATA",inputs:e,formIsValid:t})}),[])]}},962:(e,t,i)=>{i.d(t,{B_:()=>r,Ik:()=>d,i$:()=>c,tf:()=>u});const a="REQUIRE",l="MINLENGTH",s="MAXLENGTH",n="EMAIL",r=()=>({type:a}),d=e=>({type:l,val:e}),c=()=>({type:n}),u=(e,t)=>{let i=!0;for(const r of t)r.type===a&&(i=i&&e.trim().length>0),r.type===l&&(i=i&&e.trim().length>=r.val),r.type===s&&(i=i&&e.trim().length<=r.val),"MIN"===r.type&&(i=i&&+e>=r.val),"MAX"===r.type&&(i=i&&+e<=r.val),r.type===n&&(i=i&&/^\S+@\S+\.\S+$/.test(e));return i}},284:()=>{}}]);
//# sourceMappingURL=830.2142c527.chunk.js.map